{"version":3,"sources":["app.ts","environment.ts","main.ts","side-bar.ts","messages/menu.ts","screens/article.ts","configuration.ts"],"names":[],"mappings":"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","file":"aurelia-docs.js","sourcesContent":["import {Container, autoinject} from 'aurelia-dependency-injection';\nimport {History} from 'aurelia-history';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {ShowMenu, HideMenu} from './messages/menu';\nimport {Article} from './screens/article';\n\n@autoinject\nexport class App {\n  activeTab = null;\n  currentScreen = null;\n\n  constructor(private container: Container, private history: History, private ea: EventAggregator) {}\n\n  activate() {\n    this.history.activate({ \n      pushState: true,\n      root: document.getElementsByTagName('base')[0].getAttribute('href'),\n      routeHandler: this.loadUrl.bind(this) \n    });\n  }\n\n  loadUrl(url: string) { \n    url = trimStart('/', trimEnd('/', url));\n    console.log(url);\n    \n    if (url.indexOf('discuss') !== -1) {\n      this.activeTab = 'discuss';\n      this.ea.publish(new HideMenu());\n    } else if (url.indexOf('blog') !== -1) {\n      this.activeTab = 'blog';\n      this.ea.publish(new HideMenu());\n    } else if (url.indexOf('api') !== -1) {\n      this.activeTab = 'api';\n      this.ea.publish(new ShowMenu(url));\n    } else if (url.indexOf('article') !== -1) {\n      this.activeTab = 'article';\n      this.currentScreen = (<Article>this.container.get(Article)).withUrl(url);\n      this.ea.publish(new ShowMenu(url));\n    } else {\n      this.activeTab = 'home';\n      this.ea.publish(new HideMenu());\n    }\n  }\n}\n\nfunction trimStart(character: string, string: string) {\n  var startIndex = 0;\n\n  while (string[startIndex] === character) {\n      startIndex++;\n  }\n\n  return string.substr(startIndex);\n}\n\nfunction trimEnd(character: string, string: string) {\n  var startIndex = string.length - 1;\n\n  while (string[startIndex] === character) {\n      startIndex--;\n  }\n\n  return string.substr(0, startIndex + 1);\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\nimport {App} from './app';\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .basicConfiguration()\n    .history()\n    .globalResources([\n      './side-bar'\n    ]);\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n  \n  aurelia.start().then(() => {\n    let app = <App>aurelia.container.get(App);\n    aurelia.enhance(app, 'app-host').then(() => app.activate());\n  });\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {autoinject} from 'aurelia-dependency-injection';\nimport {History} from 'aurelia-history';\nimport {ShowMenu, HideMenu} from './messages/menu';\nimport {Configuration} from './configuration';\n\n@autoinject\nexport class SideBar {\n  isActive = false;\n  docs = window['aureliaDocConfiguration'].docs;\n  selectedItem:any = null;\n  menu: any = null;\n\n  constructor(private config: Configuration, private ea: EventAggregator, private history: History) {\n    ea.subscribe(ShowMenu, (msg:ShowMenu) => {\n      let api = this.config.findApiItem(msg.path);\n\n      if (api) {\n        this.selectedItem = api;\n        this.menu = this.docs.api;\n        this.isActive = true;\n      } else {\n        let articleOrGroup = config.findToCItem(msg.path);\n\n        if (articleOrGroup) {\n          if (articleOrGroup.items) {\n            this.menu = articleOrGroup.items;\n          } else {\n            this.selectedItem = articleOrGroup;\n            //TODO: load up the headings\n          }\n\n          this.isActive = true;\n        } else {\n          this.isActive = false;\n        }\n      }\n    });\n\n    ea.subscribe(HideMenu, (msg:HideMenu) => {\n      this.isActive = false;\n    });\n  }\n\n  select(item) {\n    this.history.navigate(item.dest);\n  }\n}\n","export class ShowMenu {\n  constructor(public path: string) {}\n}\n\nexport class HideMenu {}\n","import {HttpClient} from 'aurelia-fetch-client';\nimport {autoinject} from 'aurelia-dependency-injection';\nimport {InlineViewStrategy} from 'aurelia-templating';\nimport {join} from 'aurelia-path';\n\n@autoinject\nexport class Article {\n  url: string = null;\n  strategy: InlineViewStrategy;\n\n  constructor(private http: HttpClient) {}\n\n  withUrl(url: string) {\n    this.url = url;\n    return this;\n  }\n\n  activate() {\n    return this.http.fetch(join(this.url, 'index-fragment.html'))\n      .then(response => response.text())\n      .then(text => {\n        this.strategy = new InlineViewStrategy(`<template>${text}</template>`);\n      });\n  }\n\n  getViewStrategy() {\n    return this.strategy;\n  }\n}\n","export interface DocItem {\n  name: string;\n  dest: string;\n}\n\nexport interface ToCItem extends DocItem {\n  items?: ToCItem[];\n  personas?: string[];\n}\n\nexport class Configuration {\n  private config = window['aureliaDocConfiguration'];\n\n  findApiItem(path: string): DocItem | null {\n    return this.config.docs.api.find(x => x.dest === path);\n  }\n\n  findToCItem(path: string): ToCItem | null {\n    return findIn(this.config.docs.article, path);\n  }\n}\n\nfunction findIn(items:ToCItem[], path: string): any {\n  let found = items.find(x => x.dest === path);\n\n  if (found) {\n    return found;\n  }\n\n  for (let i = 0, ii = items.length; i < ii; ++i) {\n    let current = items[i];\n\n    if (current.items) {\n      found = findIn(current.items, path);\n      if (found) {\n        return found;\n      }\n    }\n  }\n\n  return null;\n}\n"],"sourceRoot":".."}