<section class="article">
  <header>
    <h1>Router Configuration</h1>
    <h2>This article covers Aurelia&#x27;s router configuration.</h2>
  </header>

  <article class="markdown">
    <au-doc-section uid="1" version="1.0.0" heading="Basic Configuration"><p>To use Aurelia's router, your component view must have a <code>&lt;router-view&gt;&lt;/router-view&gt;</code> element. In order to configure the router, the component's view-model requires a <code>configureRouter()</code> function.</p>
<code-listing heading="app.html">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Crouter-view%3E%3C/router-view%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
<code-listing heading="Basic Route Configuration">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>You can also call <code>mapRoute()</code> on a single route configuration.</p>
<ul>
<li><code>config.map()</code> adds route(s) to the router.  Although only route, name, moduleId, href and nav are shown above there are other properties that can be included in a route. The class name for each route is <code>RouteConfig</code>.</li>
<li><code>route</code> - is the pattern to match against incoming URL fragments. It can be a string or array of strings. The route can contain parameterized routes or wildcards as well.
<ul>
<li>Parameterized routes match against a string with a <code>:token</code> parameter (ie: 'users/:id/detail'). An object with the token parameter's name is set as property and passed as a parameter to the route view-model's <code>activate()</code> function.</li>
<li>A parameter can be made optional by appending a question mark <code>:token?</code> (ie: <code>users/:id?/detail</code> would match both <code>users/3/detail</code> and <code>users/detail</code>). When an optional parameter is missing from the url, the property passed to <code>activate()</code> is <code>undefined</code>.</li>
<li>Wildcard routes are used to match the &quot;rest&quot; of a path (ie: files/*path matches files/new/doc or files/temp). An object with the rest of the URL after the segment is set as the <code>path</code> property and passed as a parameter to <code>activate()</code> as well.</li>
</ul>
</li>
<li><code>href</code> - is a conditionally optional property. If it is not defined then route is used. If route has segments then href is required as in the case of files because the router does not know how to fill out the parameterized portions of the pattern.</li>
<li><code>nav</code> - is a boolean or number property. When set to true the route will be included in the router's navigation model. This makes it easier to create a dynamic menu or similar elements. When specified as number, the value will be used in sorting the routes.</li>
</ul>
</au-doc-section>
<au-doc-section uid="2" version="1.0.0" heading="Options"><h3>Push State</h3>
<p>Add 
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base" target="_blank">a base tag</a>
 to the head of your html document. If you're using JSPM, RequireJS or a similar module loader, you will also need to configure it with a base url, corresponding to your base tag's <code>href</code>. Finally, be sure to set the <code>config.options.root</code> to match your base tag's setting.</p>
<code-listing heading="Push State">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%29%20%7B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.options.pushState%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20config.options.root%20%3D%20%27/%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27welcome%27%5D%2C%20%20%20%20name%3A%20%27welcome%27%2C%20%20%20%20%20moduleId%3A%20%27welcome%27%2C%20%20%20%20%20%20nav%3A%20true%2C%20title%3A%27Welcome%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27flickr%27%2C%20%20%20%20%20%20%20name%3A%20%27flickr%27%2C%20%20%20%20%20%20moduleId%3A%20%27flickr%27%2C%20%20%20%20%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27child-router%27%2C%20name%3A%20%27childRouter%27%2C%20moduleId%3A%20%27child-router%27%2C%20nav%3A%20true%2C%20title%3A%27Child%20Router%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20%20%20%20%20%20%20%20%20%20%20%20%20redirect%3A%20%27welcome%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRedirect%2C%20NavigationInstruction%2C%20RouterConfiguration%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.options.pushState%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20config.options.root%20%3D%20%27/%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27welcome%27%5D%2C%20%20%20%20name%3A%20%27welcome%27%2C%20%20%20%20%20moduleId%3A%20%27welcome%27%2C%20%20%20%20%20%20nav%3A%20true%2C%20title%3A%27Welcome%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27flickr%27%2C%20%20%20%20%20%20%20name%3A%20%27flickr%27%2C%20%20%20%20%20%20moduleId%3A%20%27flickr%27%2C%20%20%20%20%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27child-router%27%2C%20name%3A%20%27childRouter%27%2C%20moduleId%3A%20%27child-router%27%2C%20nav%3A%20true%2C%20title%3A%27Child%20Router%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20%20%20%20%20%20%20%20%20%20%20%20%20redirect%3A%20%27welcome%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<au-alert type="warning"><p>
PushState requires server-side support. Don't forget to configure your server appropriately.</p>
</au-alert>
</au-doc-section>
<au-doc-section uid="3" version="1.0.0" heading="Dynamically Specify Route Components"><p>You can add a <code>navigationStrategy</code> to a route to allow dynamic routes. Within the navigation strategy Aurelia requires you to configure <code>instruction.config</code> with the desired <code>moduleId</code>, viewPorts or redirect.</p>
<code-listing heading="Using a Route Navigation Strategy">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20var%20navStrat%20%3D%20%28instruction%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20instruction.config.moduleId%20%3D%20instruction.fragment%0A%20%20%20%20%20%20%20%20%20%20instruction.config.href%20%3D%20instruction.fragment%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27admin*path%27%5D%2C%20%20%20name%3A%20%27route%27%2C%20%20navigationStrategy%3A%20navStrat%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%2C%20NavigationInstruction%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20let%20navStrat%20%3D%20%28instruction%3A%20NavigationInstruction%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20instruction.config.moduleId%20%3D%20instruction.fragment%0A%20%20%20%20%20%20%20%20%20%20instruction.config.href%20%3D%20instruction.fragment%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27admin*path%27%5D%2C%20%20%20name%3A%20%27route%27%2C%20%20navigationStrategy%3A%20navStrat%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
</au-doc-section>
<au-doc-section uid="4" version="1.0.0" heading="Adding Additional Data To A Route"><p>Although Aurelia does allow you to pass any additional property to a route's configuration object, <code>settings</code> is the default parameter to which you should add arbitrary data that you want to pass to the route.</p>
<code-listing heading="Using Route Settings">
  <source-code lang="ES 2015/2016">%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%2C%20settings%3A%20%7Bdata%3A%20%27...%27%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%2C%20settings%3A%20%7Bdata%3A%20%27...%27%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
</au-doc-section>
<au-doc-section uid="5" version="1.0.0" heading="Case Sensitive Routes"><p>You can set a route to be case sensitive, should you wish:</p>
<code-listing heading="Making a Route Case-Sensitive">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%2C%20caseSensitive%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20nav%3A%20true%2C%20caseSensitive%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>In the above example, our route will only match URL fragment of '/users' and not '/Users', <em>but</em> since the route 'users/:id/detail' is not case sensitive the URL Users/:id/detail would match. By default Aurelia's routes are not case sensitive.</p>
</au-doc-section>
<au-doc-section uid="6" version="1.0.0" heading="Handling Unknown Routes"><p>Aurelia allows you to map any unknown routes. Parameters passed to <code>mapUnknownRoutes()</code> can be:</p>
<ul>
<li>A string to a moduleId. This module will be navigated to any time a route is not found.</li>
<li>A routeConfig object. This configuration object will be used any time a route is not found.</li>
<li>A function which is passed the NavigationInstruction object and can decide the route dynamically.</li>
</ul>
<h3>Using a ModuleId for Unknown Routes</h3>
<code-listing heading="Static Unknown Routes">
  <source-code>%0A%20%20%3Csource-code%20lang%3D%22ES%202015/2016%22%3E%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%2C%20caseSensitive%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20config.mapUnknownRoutes%28%27not-found%27%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20nav%3A%20true%2C%20caseSensitive%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20config.mapUnknownRoutes%28%27not-found%27%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>The above example will redirect any unmatched routes to the <code>not-found</code> component module.</p>
<h3>Using A Function For Unknown Routes</h3>
<p>The function passed to <code>mapUnknownRoutes()</code> has to return:</p>
<ul>
<li>A string to a moduleId.</li>
<li>An object with property <code>moduleId</code> of type string.</li>
<li>A <code>RouteConfig</code> object.</li>
<li>A <code>Promise</code> that resolves to any of the above.</li>
</ul>
<code-listing heading="Dynamic Unknown Routes">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%0A%20%20%20%20%20%20%20%20var%20handleUnknownRoutes%20%3D%20%28instruction%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%20route%3A%20%27not-found%27%2C%20moduleId%3A%20%27not-found%27%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20config.mapUnknownRoutes%28handleUnknownRoutes%29%3B%0A%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20NavigationInstruction%2C%20Router%2C%20RouteConfig%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%0A%20%20%20%20%20%20%20%20let%20handleUnknownRoutes%20%3D%20%28instruction%3A%20NavigationInstruction%29%3A%20RouteConfig%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%20route%3A%20%27not-found%27%2C%20moduleId%3A%20%27not-found%27%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20config.mapUnknownRoutes%28handleUnknownRoutes%29%3B%0A%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
</au-doc-section>
<au-doc-section uid="7" version="1.0.0" heading="Redirecting Routes"><p>Aurelia allows redirecting of routes to URL fragments by specifying redirect with a string consisting of a URL fragment.</p>
<code-listing heading="Route Config Redirects">
  <source-code lang="ES 2015/ES 2016/TypeScript">%0A%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20%20%20%20%20%20%20%20%20%20%20redirect%3A%20%27home%27%20%7D%2C%0A%20%20%20%20%20%20%7B%20route%3A%20%27home%27%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%0A%20%20%20%20%5D%29%3B%0A%20%20</source-code>
</code-listing>
<au-alert type="info"heading="Use Redirect On Empty Routes with Child Routers"><p>
The <code>redirect</code> is particularly useful when you have an &quot;empty&quot; route pattern (such as the first route above) that maps to a component with a child router. In this case, create a non-empty route and then redirect the empty route to the non-empty route (as above). This will enable the child router to consistently match child routes without getting confused in scenarios where the empty route was matched.</p>
</au-alert>
</au-doc-section>
<au-doc-section uid="8" version="1.0.0" heading="Pipelines"><p>Aurelia has two router classes, <code>AppRouter</code> and <code>Router</code>. <code>AppRouter</code> extends the <code>Router</code> class and is the main application router. <code>Router</code> is used for any child routers including nested child routers. One of the main differences between the two is pipelines are only allowed on the <code>AppRouter</code> and not any child routers.</p>
<p>You can create your own pipeline steps using <code>addPipelineStep</code>, but the step's name must match one of the pipeline's slots, the default slots in order are <code>authorize</code>, <code>preActivate</code>, <code>preRender</code>, and <code>postRender</code>. Aurelia also has functions for creating a pipeline step for these slots.</p>
<ul>
<li><code>authorize</code> is called between loading the route's step and calling the route view-model' <code>canActivate</code> function if defined.</li>
<li><code>preActivate</code> is called between the route view-model' <code>canActivate</code> function and the previous route view-model's <code>deactivate</code> function if defined.</li>
<li><code>preRender</code> is called between the route view-model's activate function and before the component is rendered/composed.</li>
<li><code>postRender</code> is called after the component has been render/composed.</li>
</ul>
<p>A pipeline step must be an object that contains a <code>run(navigationInstruction, next)</code> function.</p>
<code-listing heading="An Authorize Step">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20import%20%7BRedirect%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20var%20step%20%3D%20new%20AuthorizeStep%3B%0A%20%20%20%20%20%20%20%20config.addAuthorizeStep%28step%29%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20settings%3A%20%7B%20auth%3A%20true%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%2C%20settings%3A%20%7B%20auth%3A%20true%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20AuthorizeStep%20%7B%0A%20%20%20%20%20%20run%28navigationInstruction%2C%20next%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28navigationInstruction.getAllInstructions%28%29.some%28i%20%3D%3E%20i.config.settings.auth%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20isLoggedIn%20%3D%20//%20insert%20magic%20here%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21isLoggedIn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next.cancel%28new%20Redirect%28%27login%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRedirect%2C%20NavigationInstruction%2C%20RouterConfiguration%2C%20Router%2C%20Next%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.addPipelineStep%28%27authorize%27%2C%20AuthorizeStep%29%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20AuthorizeStep%20%7B%0A%20%20%20%20%20%20run%28navigationInstruction%3A%20NavigationInstruction%2C%20next%3A%20Next%29%3A%20Promise%3Cany%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20%28navigationInstruction.getAllInstructions%28%29.some%28i%20%3D%3E%20i.config.settings.auth%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20isLoggedIn%20%3D%20//insert%20magic%20here%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21isLoggedIn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next.cancel%28new%20Redirect%28%27login%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<code-listing heading="A PreActivate Step">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20function%20step%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20step.run%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20step.run%20%3D%20%28navigationInstruction%2C%20next%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20next%28%29%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20config.addPreActivateStep%28step%29%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRedirect%2C%20NavigationInstruction%2C%20RouterConfiguration%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20function%20step%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20step.run%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20step.run%20%3D%20%28navigationInstruction%3A%20NavigationInstruction%2C%20next%3A%20Function%29%3A%20Promise%3Cany%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.addPreActivateStep%28step%29%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<code-listing heading="A PreRender Step">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20var%20step%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20run%3A%20%28navigationInstruction%2C%20next%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20config.addPreRenderStep%28step%29%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRedirect%2C%20NavigationInstruction%2C%20RouterConfiguration%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20let%20step%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20run%3A%20%28navigationInstruction%3A%20NavigationInstruction%2C%20next%3A%20Function%29%3A%20Promise%3Cany%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.addPreRenderStep%28step%29%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<code-listing heading="A PostRender Step">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20var%20step%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20run%3A%20%28navigationInstruction%2C%20next%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20config.addPostRenderStep%28step%29%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRedirect%2C%20NavigationInstruction%2C%20RouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%0A%20%20%20%20%20%20%20%20let%20step%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20run%3A%20%28navigationInstruction%3A%20NavigationInstruction%2C%20next%3A%20Function%29%3A%20Promise%3Cany%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.addPostRenderStep%28step%29%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27files/*path%27%2C%20%20%20%20%20%20%20name%3A%20%27files%27%2C%20%20%20%20%20%20moduleId%3A%20%27files/index%27%2C%20%20%20href%3A%27%23files%27%2C%20%20%20nav%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
</au-doc-section>
<au-doc-section uid="9" version="1.0.0" heading="Rendering View Ports"><p>Every instance of a <code>router-view</code> custom element essentially defines a &quot;view port&quot;.  When you give a <code>router-view</code> a name, you can refer to it in the <code>viewPorts</code> property of the route configuration in your javascript.  The value of a <code>viewPorts</code> property is an object where each property name is the name of a view port (ie, <code>router-view</code>) and each value is the <code>moduleId</code> destination of the route.  Thus you can specify any number of view ports on a single route configuration.</p>
<au-alert type="info"><p>
If you don't name a <code>router-view</code>, it will be available under the name 'default'.</p>
</au-alert>
<p>Following is an example of the use of view ports:</p>
<code-listing heading="app.html">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Crouter-view%20name%3D%22left%22%3E%3C/router-view%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Crouter-view%20name%3D%22right%22%3E%3C/router-view%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20name%3A%20%27users%27%2C%20viewPorts%3A%20%7B%20left%3A%20%7B%20moduleId%3A%20%27user/list%27%20%7D%2C%20right%3A%20%7B%20moduleId%3A%20%27user/detail%27%20%7D%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRedirect%2C%20NavigationInstruction%2C%20RouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20name%3A%20%27users%27%2C%20viewPorts%3A%20%7B%20left%3A%20%7B%20moduleId%3A%20%27user/list%27%20%7D%2C%20right%3A%20%7B%20moduleId%3A%20%27user/detail%27%20%7D%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<au-alert type="info"><p>
In addition to the <code>moduleId</code>, you can also specify a &quot;layout&quot; in the configuration of a view port.  See the discussion of Layouts elsewhere in this document.</p>
</au-alert>
</au-doc-section>
<au-doc-section uid="10" version="1.0.0" heading="Layouts"><p>Similar to MVC-style master/layout pages, Aurelia allows you to use a &quot;layout&quot; view like an MVC &quot;master template&quot; for a set of views.</p>
<p>The set of views subject to being part of a layout is defined in Aurelia as a set of views referenced by one or more routes in a router configuration.  There are two ways to associate a layout with routes.  The first is via HTML, the second is via view model code.</p>
<au-alert type="info"><p>
We're going to be a little sloppy here in terminology.  Technically, routes refer to &quot;moduleIds&quot;, not
&quot;views&quot;.  Since the router resolves a moduleId to a view, indirectly the router does reference a view.  It is easy to picture a view visually contained within a layout, so in this topic to we'll refer to views referenced by a route, not modules.</p>
</au-alert>
<p>We'll look at using HTML first.  We know that the <code>router-view</code> custom HTML element is always associated with a set of one or more views referenced in a router configuration given in its parent view's view model.  By associating a layout with a <code>router-view</code> one can thus associate a layout with the same set of views with which the <code>router-view</code> is associated.</p>
<p>To specify a layout on the <code>router-view</code> custom element, we use the following attributes:</p>
<ul>
<li><code>layout-view</code> - specifies the file name (with path) of the layout view to use.</li>
<li><code>layout-view-model</code> - specifies the moduleId of the view model to use with the layout view.</li>
<li><code>layout-model</code> - specifies the model parameter to pass to the layout view model's <code>activate</code> function.</li>
</ul>
<au-alert type="info"><p>
All of these layout attributes are bindable.</p>
</au-alert>
<p>Following is an example of HTML in which we specify that we want all destination views reachable under the <code>router-view</code> to be laid-out inside a view with file name <code>layout.html</code>, located in the same directory as the view contianing the <code>router-view</code>:</p>
<code-listing heading="app.html">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Crouter-view%20layout-view%3D%22layout.html%22%3E%3C/router-view%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
<p>Here is the layout view itself:</p>
<code-listing heading="layout.html">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22left-content%22%3E%0A%20%20%20%20%20%20%20%20%3Cslot%20name%3D%22left-content%22%3E%3C/slot%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22right-content%22%3E%0A%20%20%20%20%20%20%20%20%3Cslot%20name%3D%22right-content%22%3E%3C/slot%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
<p>And here we define a view that we want to appear within the layout:</p>
<code-listing heading="home.html">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Cdiv%20slot%3D%22left-content%22%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E%24%7BleftMessage%7D.%3C/p%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%3Cdiv%20slot%3D%22right-content%22%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E%24%7BrightMessage%7D.%3C/p%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%3Cdiv%3EThis%20will%20not%20be%20displayed%20in%20the%20layout%20because%20it%20is%20not%20contained%20in%20any%20named%20slot%20referenced%20by%20the%20layout.%3C/div%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
<code-listing heading="home${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20Home%20%7B%0A%20%20%20%20%20%20constructor%28%29%20%7B%0A%20%20%20%20%20%20%20%20this.leftMessage%20%3D%20%22I%27m%20content%20that%20will%20show%20up%20on%20the%20left%22%3B%0A%20%20%20%20%20%20%20%20this.rightMessage%20%3D%20%22I%27m%20content%20that%20will%20show%20up%20on%20the%20right%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20export%20class%20Home%20%7B%0A%20%20%20%20%20%20constructor%28%29%20%7B%0A%20%20%20%20%20%20%20%20this.leftMessage%20%3D%20%22I%27m%20content%20that%20will%20show%20up%20on%20the%20left%22%3B%0A%20%20%20%20%20%20%20%20this.rightMessage%20%3D%20%22I%27m%20content%20that%20will%20show%20up%20on%20the%20right%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>Observe how we use the <code>slot</code> mechanism for associating parts of the layout to parts of the views that are to be contained within the layout.  (Happy for developers, this is conveniently the same mechanism and syntax we use in Aurelia when providing content to custom elements.)</p>
<p>Now we just have to define the route configuration that will be associated with the <code>router-view</code>:</p>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%7B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20name%3A%20%27home%27%2C%20moduleId%3A%20%27home%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%29%7B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20name%3A%20%27home%27%2C%20moduleId%3A%20%27home%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>Thus when we navigate to the module &quot;home&quot; we find that it is laid-out as desired inside the layout view.</p>
<p>Note there is nothing different about the above route configuration with or without the layout.  It may reference any number of views that would all be included by default in the layout.</p>
<p>So that is how we use HTML to associate a layout view with a set of views referenced in a router configuration.</p>
<p>We can also associate layouts with route configurations using code in our view model.  Suppose we like what we've done above, but we have a couple views that we would like to associate with a different layout and would thus like to partially override the configuration given in the HTML.  The following code is an example of how we can do that:</p>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%7B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20name%3A%20%27home%27%2C%20moduleId%3A%20%27home%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27login%27%2C%20name%3A%20%27login%27%2C%20moduleId%3A%20%27login/index%27%2C%20layoutView%3A%20%27layout-login.html%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20name%3A%20%27users%27%2C%20moduleId%3A%20%27users/index%27%2C%20layoutModel%3A%20%27layout-users%27%2C%20layoutViewModel%3A%20%7B%20access%3A%20%22admin%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%29%7B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20name%3A%20%27home%27%2C%20moduleId%3A%20%27home%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27login%27%2C%20name%3A%20%27login%27%2C%20moduleId%3A%20%27login/index%27%2C%20layoutView%3A%20%27layout-login.html%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20name%3A%20%27users%27%2C%20moduleId%3A%20%27users/index%27%2C%20layoutModel%3A%20%27layout-users%27%2C%20layoutViewModel%3A%20%7B%20access%3A%20%22admin%22%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>The above example will assign different layouts to the &quot;login&quot; and &quot;users&quot; views, overriding the HTML while leaving &quot;home&quot; to remain as configured in the HTML.  Noticing we're using camel-cased property names here, unlike in the HTML.</p>
<p>You can also specify a layout in the <code>viewPorts</code> configuration of a route.  See a simple example, below:</p>
<code-listing heading="app.html">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Crouter-view%20name%3D%22myRouterView%22%3E%3C/router-view%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%7B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20name%3A%20%27home%27%2C%20viewPorts%3A%20%7B%20myRouterView%3A%20%7B%20moduleId%3A%20%27home%27%2C%20layoutView%3A%20%27default.html%27%20%7D%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%29%7B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27%27%2C%20name%3A%20%27home%27%2C%20viewPorts%3A%20%7B%20myRouterView%3A%20%7B%20moduleId%3A%20%27home%27%2C%20layoutView%3A%20%27default.html%27%20%7D%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
</au-doc-section>
<au-doc-section uid="11" version="1.0.0" heading="View Swapping and Animation"><p>When the Aurelia router navigates from one view to another, we refer to this as &quot;swapping&quot; one view for another.  Aurelia gives us an optional set of strategies dictating how a swap proceeds, or more specifically, how animation plays out during the swap.  We refer to these strategies more precisely as the &quot;swap order&quot;.</p>
<au-alert type="info"><p>
If there is no animation defined, then swap-order has no visible impact.</p>
</au-alert>
<p>You can apply a swap strategy to one or more routes by applying the <code>swap-order</code> attribute to a <code>router-view</code> custom HTML element.  The strategy will then be applied in any transition between two views accessible under the <code>router-view</code>.</p>
<au-alert type="info"><p>
<code>swap-order</code> is bindable.</p>
</au-alert>
<p>The following swap order strategies are available:</p>
<ul>
<li>before - animate the next view in before removing the current view</li>
<li>with - animate the next view at the same time the current view is removed</li>
<li>after - animate the next view in after the current view has been removed (the default)</li>
</ul>
<p>Here is an example of setting the swap order strategy on a <code>router-view</code>:</p>
<code-listing heading="swap-order">
  <source-code lang="HTML">%0A%20%20%20%20%3Ctemplate%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Crouter-view%20swap-order%3D%22before%22%3E%3C/router-view%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/template%3E%0A%20%20</source-code>
</code-listing>
</au-doc-section>
<au-doc-section uid="12" version="1.0.0" heading="Internationalizing Titles"><p>If your application targets multiple cultures or languages, you probably want to translate your route titles. The <code>Router</code> class has a <code>transformTitle</code> property that can be used for this. It is expected to be assigned a function that takes the active route's title as a parameter and then returns the translated title. For example, if your app uses <code>aurelia-i18n</code>, its routes' titles would typically be set to some translation keys
and the <code>AppRouter</code>'s <code>transformTitle</code> would be configured in such a way that the active route's title is translated using the <code>I18N</code>'s <code>tr</code> method. Additionally you can listen to a custom event published by the I18N service to react on locale changes using the EventAggregator:</p>
<code-listing heading="src/main${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20import%20Backend%20from%20%27i18next-xhr-backend%27%3B%0A%20%20%20%20import%20%7BAppRouter%7D%20from%20%27aurelia-router%27%3B%0A%20%20%20%20import%20%7BEventAggregator%7D%20from%20%27aurelia-event-aggregator%27%3B%0A%0A%20%20%20%20export%20function%20configure%28aurelia%29%20%7B%0A%20%20%20%20%20%20aurelia.use%0A%20%20%20%20%20%20%20%20.standardConfiguration%28%29%0A%20%20%20%20%20%20%20%20.plugin%28%27aurelia-i18n%27%2C%20i18n%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20i18n.i18next.use%28Backend%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20i18n.setup%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20backend%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20loadPath%3A%20%27./locales/%7B%7Blng%7D%7D.json%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20lng%20%3A%20%27en%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fallbackLng%20%3A%20%27en%27%0A%20%20%20%20%20%20%20%20%20%20%7D%29.then%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20router%20%3D%20aurelia.container.get%28AppRouter%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20router.transformTitle%20%3D%20title%20%3D%3E%20i18n.tr%28title%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20eventAggregator%20%3D%20aurelia.container.get%28EventAggregator%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20eventAggregator.subscribe%28%27i18n%3Alocale%3Achanged%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20router.updateTitle%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20aurelia.start%28%29.then%28%28%29%20%3D%3E%20aurelia.setRoot%28%29%29%3B%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20Backend%20from%20%27i18next-xhr-backend%27%3B%0A%20%20%20%20import%20%7BAppRouter%7D%20from%20%27aurelia-router%27%3B%0A%20%20%20%20import%20%7BEventAggregator%7D%20from%20%27aurelia-event-aggregator%27%3B%0A%0A%20%20%20%20export%20function%20configure%28aurelia%29%20%7B%0A%20%20%20%20%20%20aurelia.use%0A%20%20%20%20%20%20%20%20.standardConfiguration%28%29%0A%20%20%20%20%20%20%20%20.plugin%28%27aurelia-i18n%27%2C%20i18n%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20i18n.i18next.use%28Backend%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20i18n.setup%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20backend%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20loadPath%3A%20%27./locales/%7B%7Blng%7D%7D.json%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20lng%20%3A%20%27en%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fallbackLng%20%3A%20%27en%27%0A%20%20%20%20%20%20%20%20%20%20%7D%29.then%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20router%20%3D%20aurelia.container.get%28AppRouter%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20router.transformTitle%20%3D%20title%20%3D%3E%20i18n.tr%28title%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20eventAggregator%20%3D%20aurelia.container.get%28EventAggregator%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20eventAggregator.subscribe%28%27i18n%3Alocale%3Achanged%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20router.updateTitle%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20aurelia.start%28%29.then%28%28%29%20%3D%3E%20aurelia.setRoot%28%29%29%3B%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<code-listing heading="locales/en.json">
  <source-code lang="JSON">%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22titles%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22app%22%3A%20%22My%20App%22%2C%0A%20%20%20%20%20%20%20%20%22home%22%3A%20%22Home%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<code-listing heading="src/app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27titles.app%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20name%3A%20%27home%27%2C%20moduleId%3A%20%27home%27%2C%20title%3A%20%27titles.home%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27titles.app%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20name%3A%20%27home%27%2C%20moduleId%3A%20%27home%27%2C%20title%3A%20%27titles.home%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
<p>The default value of the<code>transformTitle</code> property does the following:</p>
<ul>
<li>For the child <code>Router</code>, it delegates to its parent's <code>transformTitle</code> function.</li>
<li>For the <code>AppRouter</code>, it returns the title untransformed.</li>
</ul>
<p>In the previous example, the <code>AppRouter</code>'s <code>transformTitle</code> is set, so all child <code>Router</code>s will delegate down to it by default. However, this means that the <code>transformTitle</code> can be overridden for specific child <code>Router</code>s if some areas of your app need custom transformation.</p>
</au-doc-section>
<au-doc-section uid="12" version="1.0.0" heading="Configuring a Fallback Route"><p>Whenever navigation is rejected, it is redirected to a previous location. However in certain cases a previous location doesn't exist, e.g. when it happens as the first navigation after the startup of application. To handle this scenario, you can set up a fallback route.</p>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%2C%20router%29%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20%20%20nav%3A%20true%2C%20caseSensitive%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20config.fallbackRoute%28%27users%27%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
  <source-code lang="TypeScript">%0A%20%20%20%20import%20%7BRouterConfiguration%2C%20Router%7D%20from%20%27aurelia-router%27%3B%0A%0A%20%20%20%20export%20class%20App%20%7B%0A%20%20%20%20%20%20configureRouter%28config%3A%20RouterConfiguration%2C%20router%3A%20Router%29%3A%20void%20%7B%0A%20%20%20%20%20%20%20%20this.router%20%3D%20router%3B%0A%20%20%20%20%20%20%20%20config.title%20%3D%20%27Aurelia%27%3B%0A%20%20%20%20%20%20%20%20config.map%28%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%5B%27%27%2C%20%27home%27%5D%2C%20%20%20%20%20%20%20name%3A%20%27home%27%2C%20%20%20%20%20%20%20moduleId%3A%20%27home/index%27%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users%27%2C%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%27users%27%2C%20%20%20%20%20%20moduleId%3A%20%27users/index%27%2C%20nav%3A%20true%2C%20caseSensitive%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20route%3A%20%27users/%3Aid/detail%27%2C%20name%3A%20%27userDetail%27%2C%20moduleId%3A%20%27users/detail%27%20%7D%0A%20%20%20%20%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20config.fallbackRoute%28%27users%27%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20</source-code>
</code-listing>
</au-doc-section>

  </article>
</section>
